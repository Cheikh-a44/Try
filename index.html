<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>To-Do List Pro - Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: url('https://images.unsplash.com/photo-1506784983877-45594efa4cbe?auto=format&fit=crop&w=1600&q=80') no-repeat center center/cover;
      backdrop-filter: blur(6px);
      transition: background 0.5s ease;
    }

    body.light-mode {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .todo-container {
      background: rgba(0, 0, 0, 0.75);
      border-radius: 20px;
      box-shadow: 0 0 30px rgba(0, 255, 255, 0.4);
      padding: 25px;
      width: 450px;
      max-width: 95vw;
      color: white;
      text-align: center;
      animation: fadeIn 0.8s ease-in;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(0, 255, 255, 0.2);
    }

    body.light-mode .todo-container {
      background: rgba(255, 255, 255, 0.95);
      color: #333;
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.2);
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    h2 {
      color: #00ffff;
      margin: 0;
      font-size: 1.5em;
    }

    body.light-mode h2 {
      color: #667eea;
    }

    .theme-toggle {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      font-size: 1.2em;
      cursor: pointer;
      transition: 0.3s;
    }

    .theme-toggle:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: rotate(30deg);
    }

    .input-group {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }

    input, select {
      padding: 10px 15px;
      border-radius: 10px;
      border: none;
      outline: none;
      background: rgba(255, 255, 255, 0.15);
      color: white;
      font-size: 0.9em;
      transition: 0.3s;
    }

    body.light-mode input,
    body.light-mode select {
      background: rgba(0, 0, 0, 0.1);
      color: #333;
    }

    input:focus, select:focus {
      background: rgba(255, 255, 255, 0.25);
      box-shadow: 0 0 10px #00ffff;
    }

    body.light-mode input:focus,
    body.light-mode select:focus {
      background: rgba(255, 255, 255, 0.8);
      box-shadow: 0 0 10px #667eea;
    }

    #taskInput {
      flex: 1;
      min-width: 200px;
    }

    button {
      background: #00ffff;
      border: none;
      border-radius: 10px;
      padding: 10px 15px;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
      color: #000;
    }

    body.light-mode button {
      background: #667eea;
      color: white;
    }

    button:hover {
      background: #00cccc;
      transform: scale(1.05);
    }

    body.light-mode button:hover {
      background: #5a6fd8;
    }

    .controls {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .controls input,
    .controls select {
      flex: 1;
      min-width: 120px;
    }

    .stats {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 10px;
      margin-bottom: 20px;
      background: rgba(255, 255, 255, 0.1);
      padding: 15px;
      border-radius: 10px;
    }

    body.light-mode .stats {
      background: rgba(0, 0, 0, 0.05);
    }

    .stat-item {
      text-align: center;
    }

    .stat-number {
      font-size: 1.5em;
      font-weight: bold;
      color: #00ffff;
    }

    body.light-mode .stat-number {
      color: #667eea;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 4px;
      overflow: hidden;
      margin-bottom: 20px;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #00ffff, #00cccc);
      transition: width 0.5s ease;
      border-radius: 4px;
    }

    body.light-mode .progress-fill {
      background: linear-gradient(90deg, #667eea, #764ba2);
    }

    ul {
      list-style: none;
      padding: 0;
      margin: 0;
      text-align: right;
      max-height: 400px;
      overflow-y: auto;
    }

    li {
      background: rgba(255, 255, 255, 0.1);
      margin-bottom: 10px;
      padding: 15px;
      border-radius: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: 0.3s;
      border-right: 4px solid #666;
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateX(20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    body.light-mode li {
      background: rgba(0, 0, 0, 0.05);
      border-right-color: #ddd;
    }

    li.low-priority { border-right-color: #00ff00; }
    li.medium-priority { border-right-color: #ffaa00; }
    li.high-priority { border-right-color: #ff4444; }

    li.completed {
      text-decoration: line-through;
      color: #aaa;
      opacity: 0.7;
      background: rgba(0, 255, 0, 0.1);
    }

    .task-content {
      flex: 1;
      text-align: right;
      cursor: pointer;
    }

    .task-meta {
      font-size: 0.8em;
      color: #aaa;
      margin-top: 5px;
    }

    .task-actions {
      display: flex;
      gap: 5px;
      align-items: center;
    }

    .delete-btn {
      background: transparent;
      border: none;
      color: #ff5555;
      font-size: 1.2em;
      cursor: pointer;
      transition: 0.2s;
      padding: 5px;
    }

    .delete-btn:hover {
      transform: scale(1.2);
      color: #ff2222;
    }

    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #00ffaa;
      color: #000;
      padding: 15px 20px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      animation: slideInRight 0.3s ease;
      z-index: 1000;
    }

    @keyframes slideInRight {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    .template-buttons {
      display: flex;
      gap: 5px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }

    .template-btn {
      background: rgba(0, 255, 255, 0.2);
      border: 1px solid #00ffff;
      color: #00ffff;
      padding: 8px 12px;
      border-radius: 20px;
      font-size: 0.8em;
      cursor: pointer;
      transition: 0.3s;
    }

    body.light-mode .template-btn {
      background: rgba(102, 126, 234, 0.2);
      border-color: #667eea;
      color: #667eea;
    }

    .template-btn:hover {
      background: #00ffff;
      color: #000;
    }

    body.light-mode .template-btn:hover {
      background: #667eea;
      color: white;
    }

    .overdue {
      animation: pulse 2s infinite;
      border-right-color: #ff0000 !important;
    }

    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.7; }
      100% { opacity: 1; }
    }
  </style>
</head>
<body>
  <div class="todo-container">
    <div class="header">
      <h2>ğŸ“ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</h2>
      <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ™</button>
    </div>

    <!-- Ù‚ÙˆØ§Ù„Ø¨ Ø³Ø±ÙŠØ¹Ø© -->
    <div class="template-buttons">
      <button class="template-btn" onclick="loadTemplate('shopping')">ğŸ›’ ØªØ³ÙˆÙ‚</button>
      <button class="template-btn" onclick="loadTemplate('work')">ğŸ’¼ Ø¹Ù…Ù„</button>
      <button class="template-btn" onclick="loadTemplate('morning')">ğŸŒ… ØµØ¨Ø§Ø­</button>
      <button class="template-btn" onclick="loadTemplate('study')">ğŸ“š Ø¯Ø±Ø§Ø³Ø©</button>
    </div>

    <!-- Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ù‡Ù…Ø© -->
    <div class="input-group">
      <input type="text" id="taskInput" placeholder="Ø£Ø¶Ù Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©..." onkeypress="handleEnterKey(event)" />
      <button onclick="addTask()">Ø¥Ø¶Ø§ÙØ©</button>
    </div>

    <!-- Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø© -->
    <div class="controls">
      <select id="prioritySelect">
        <option value="medium">â¬…ï¸ Ø£ÙˆÙ„ÙˆÙŠØ© Ù…ØªÙˆØ³Ø·Ø©</option>
        <option value="high">â¬†ï¸ Ø£ÙˆÙ„ÙˆÙŠØ© Ø¹Ø§Ù„ÙŠØ©</option>
        <option value="low">â¬‡ï¸ Ø£ÙˆÙ„ÙˆÙŠØ© Ù…Ù†Ø®ÙØ¶Ø©</option>
      </select>
      <input type="date" id="dueDate">
      <select id="repeatSelect">
        <option value="none">Ù„Ø§ ØªÙƒØ±Ø±</option>
        <option value="daily">ÙŠÙˆÙ…ÙŠ</option>
        <option value="weekly">Ø£Ø³Ø¨ÙˆØ¹ÙŠ</option>
      </select>
    </div>

    <!-- Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØµÙÙŠØ© -->
    <div class="controls">
      <input type="text" id="searchInput" placeholder="ğŸ” Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ù‡Ø§Ù…..." oninput="filterTasks()" />
      <select id="filterSelect" onchange="filterTasks()">
        <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‡Ø§Ù…</option>
        <option value="active">ØºÙŠØ± Ù…ÙƒØªÙ…Ù„Ø©</option>
        <option value="completed">Ù…ÙƒØªÙ…Ù„Ø©</option>
        <option value="high">Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©</option>
      </select>
    </div>

    <!-- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
    <div class="stats">
      <div class="stat-item">
        <div class="stat-number" id="totalTasks">0</div>
        <div>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</div>
      </div>
      <div class="stat-item">
        <div class="stat-number" id="completedTasks">0</div>
        <div>Ù…ÙƒØªÙ…Ù„Ø©</div>
      </div>
      <div class="stat-item">
        <div class="stat-number" id="completionRate">0%</div>
        <div>Ø§Ù„Ù†Ø³Ø¨Ø©</div>
      </div>
    </div>

    <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… -->
    <div class="progress-bar">
      <div class="progress-fill" id="progressFill" style="width: 0%"></div>
    </div>

    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù… -->
    <ul id="taskList"></ul>

    <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… -->
    <div style="margin-top: 15px; display: flex; gap: 10px;">
      <button onclick="clearCompleted()" style="background: #ffaa00;">Ù…Ø³Ø­ Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©</button>
      <button onclick="shareTasks()" style="background: #00aaff;">Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
    </div>
  </div>

  <script>
    // Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    const taskInput = document.getElementById('taskInput');
    const taskList = document.getElementById('taskList');
    const prioritySelect = document.getElementById('prioritySelect');
    const dueDate = document.getElementById('dueDate');
    const repeatSelect = document.getElementById('repeatSelect');
    const searchInput = document.getElementById('searchInput');
    const filterSelect = document.getElementById('filterSelect');

    // ØªØ¹ÙŠÙŠÙ† ØªØ§Ø±ÙŠØ® Ø§Ù„ÙŠÙˆÙ… ÙƒØ­Ø¯ Ø£Ø¯Ù†Ù‰
    dueDate.min = new Date().toISOString().split('T')[0];

    // Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©
    const templates = {
      shopping: ["ğŸ Ø´Ø±Ø§Ø¡ Ø§Ù„ÙÙˆØ§ÙƒÙ‡", "ğŸ¥› Ø´Ø±Ø§Ø¡ Ø§Ù„Ø­Ù„ÙŠØ¨", "ğŸ Ø´Ø±Ø§Ø¡ Ø§Ù„Ø®Ø¨Ø²", "ğŸ¥š Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¨ÙŠØ¶"],
      work: ["ğŸ“§ Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„Ø§Øª", "ğŸ“Š Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±", "ğŸ‘¥ Ø§Ø¬ØªÙ…Ø§Ø¹ Ø§Ù„ÙØ±ÙŠÙ‚", "ğŸ“ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§Øª Ø§Ù„Ù…Ù‡Ù…Ø©"],
      morning: ["â˜• ØªØ­Ø¶ÙŠØ± Ø§Ù„Ù‚Ù‡ÙˆØ©", "ğŸ“– Ù‚Ø±Ø§Ø¡Ø© 10 ØµÙØ­Ø§Øª", "ğŸƒ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©", "ğŸ›€ Ø§Ù„Ø§Ø³ØªØ­Ù…Ø§Ù…"],
      study: ["ğŸ“˜ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¯Ø±ÙˆØ³", "âœï¸ Ø­Ù„ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª", "ğŸ”¬ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø¹Ù„Ù…ÙŠ", "ğŸ“ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª"]
    };

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù… Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
    window.onload = function() {
      loadTasks();
      updateStats();
      setupKeyboardShortcuts();
    };

    // Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©
    function addTask() {
      const taskText = taskInput.value.trim();
      if (taskText === '') {
        showNotification('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ù‡Ù…Ø©!', 'warning');
        return;
      }

      const task = {
        text: taskText,
        priority: prioritySelect.value,
        dueDate: dueDate.value,
        repeat: repeatSelect.value,
        completed: false,
        createdAt: new Date().toISOString()
      };

      const li = createTaskElement(task);
      taskList.appendChild(li);
      saveTasks();
      updateStats();
      taskInput.value = '';
      
      showNotification('âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­!');
      playSound('add');
    }

    // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Ø§Ù„Ù…Ù‡Ù…Ø©
    function createTaskElement(task) {
      const li = document.createElement('li');
      li.className = `${task.priority}-priority ${task.completed ? 'completed' : ''}`;
      
      const dueDateText = task.dueDate ? 
        new Date(task.dueDate).toLocaleDateString('ar-EG') : 'Ù„Ø§ ÙŠÙˆØ¬Ø¯';
      
      const isOverdue = task.dueDate && new Date(task.dueDate) < new Date() && !task.completed;
      if (isOverdue) li.classList.add('overdue');

      li.innerHTML = `
        <div class="task-content" onclick="toggleTask(this)">
          <div>${task.text}</div>
          <div class="task-meta">
            ${getPriorityIcon(task.priority)} | 
            ğŸ“… ${dueDateText} | 
            ${task.repeat !== 'none' ? 'ğŸ”„ ' + task.repeat : 'âŒ Ù„Ø§ ØªÙƒØ±Ø±'}
            ${isOverdue ? ' | âš ï¸ Ù…ØªØ£Ø®Ø±Ø©' : ''}
          </div>
        </div>
        <div class="task-actions">
          <button class="delete-btn" onclick="deleteTask(this)">âœ–</button>
        </div>
      `;
      
      return li;
    }

    // ØªØ¨Ø¯ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù‡Ù…Ø©
    function toggleTask(element) {
      const li = element.closest('li');
      li.classList.toggle('completed');
      saveTasks();
      updateStats();
      playSound('complete');
    }

    // Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø©
    function deleteTask(button) {
      const li = button.closest('li');
      li.style.animation = 'slideIn 0.3s ease reverse';
      setTimeout(() => {
        li.remove();
        saveTasks();
        updateStats();
        playSound('delete');
        showNotification('ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø©');
      }, 300);
    }

    // Ø­ÙØ¸ Ø§Ù„Ù…Ù‡Ø§Ù… ÙÙŠ localStorage
    function saveTasks() {
      const tasks = [];
      document.querySelectorAll('#taskList li').forEach(li => {
        const taskText = li.querySelector('.task-content div:first-child').textContent;
        const metaText = li.querySelector('.task-meta').textContent;
        
        tasks.push({
          text: taskText,
          priority: li.classList.contains('high-priority') ? 'high' : 
                   li.classList.contains('low-priority') ? 'low' : 'medium',
          dueDate: extractDateFromMeta(metaText),
          repeat: extractRepeatFromMeta(metaText),
          completed: li.classList.contains('completed'),
          createdAt: new Date().toISOString()
        });
      });
      localStorage.setItem('tasks', JSON.stringify(tasks));
    }

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù…
    function loadTasks() {
      const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
      taskList.innerHTML = '';
      tasks.forEach(task => {
        const li = createTaskElement(task);
        taskList.appendChild(li);
      });
      filterTasks(); // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©
    }

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
    function updateStats() {
      const total = document.querySelectorAll('#taskList li').length;
      const completed = document.querySelectorAll('#taskList li.completed').length;
      const rate = total > 0 ? Math.round((completed / total) * 100) : 0;

      document.getElementById('totalTasks').textContent = total;
      document.getElementById('completedTasks').textContent = completed;
      document.getElementById('completionRate').textContent = rate + '%';
      document.getElementById('progressFill').style.width = rate + '%';
    }

    // Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØµÙÙŠØ©
    function filterTasks() {
      const searchText = searchInput.value.toLowerCase();
      const filterType = filterSelect.value;
      
      document.querySelectorAll('#taskList li').forEach(li => {
        const text = li.querySelector('.task-content div:first-child').textContent.toLowerCase();
        const isCompleted = li.classList.contains('completed');
        const isHighPriority = li.classList.contains('high-priority');
        const matchesSearch = text.includes(searchText);
        
        let matchesFilter = true;
        if (filterType === 'completed') matchesFilter = isCompleted;
        else if (filterType === 'active') matchesFilter = !isCompleted;
        else if (filterType === 'high') matchesFilter = isHighPriority;
        
        li.style.display = (matchesSearch && matchesFilter) ? 'flex' : 'none';
      });
    }

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨
    function loadTemplate(templateName) {
      if (confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ù„Ø¨ "${templateName}"ØŸ Ø³ÙŠØªÙ… Ù…Ø³Ø­ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØ©.`)) {
        taskList.innerHTML = '';
        templates[templateName].forEach(taskText => {
          const task = {
            text: taskText,
            priority: 'medium',
            dueDate: '',
            repeat: 'none',
            completed: false,
            createdAt: new Date().toISOString()
          };
          const li = createTaskElement(task);
          taskList.appendChild(li);
        });
        saveTasks();
        updateStats();
        showNotification(`ğŸ“‹ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ù„Ø¨ ${templateName}`);
      }
    }

    // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ/Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ
    function toggleTheme() {
      document.body.classList.toggle('light-mode');
      const themeBtn = document.querySelector('.theme-toggle');
      themeBtn.textContent = document.body.classList.contains('light-mode') ? 'ğŸŒ' : 'ğŸŒ™';
      localStorage.setItem('theme', document.body.classList.contains('light-mode') ? 'light' : 'dark');
    }

    // ØªØ­Ù…ÙŠÙ„ theme Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø©
    if (localStorage.getItem('theme') === 'light') {
      document.body.classList.add('light-mode');
      document.querySelector('.theme-toggle').textContent = 'ğŸŒ';
    }

    // Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
    function showNotification(message, type = 'success') {
      const notification = document.createElement('div');
      notification.className = `notification ${type}`;
      notification.textContent = message;
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.remove();
      }, 3000);
    }

    // Ø§Ù„Ø£ØµÙˆØ§Øª (Ù…Ø­Ø§ÙƒØ§Ø©)
    function playSound(type) {
      // ÙÙŠ ØªØ·Ø¨ÙŠÙ‚ Ø­Ù‚ÙŠÙ‚ÙŠØŒ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ù…Ù„ÙØ§Øª ØµÙˆØªÙŠØ©
      console.log(`Playing ${type} sound`);
    }

    // Ù…Ø³Ø­ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©
    function clearCompleted() {
      const completedTasks = document.querySelectorAll('#taskList li.completed');
      if (completedTasks.length === 0) {
        showNotification('â„¹ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù… Ù…ÙƒØªÙ…Ù„Ø©', 'info');
        return;
      }
      
      if (confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ ${completedTasks.length} Ù…Ù‡Ù…Ø© Ù…ÙƒØªÙ…Ù„Ø©ØŸ`)) {
        completedTasks.forEach(task => task.remove());
        saveTasks();
        updateStats();
        showNotification(`ğŸ§¹ ØªÙ… Ù…Ø³Ø­ ${completedTasks.length} Ù…Ù‡Ù…Ø© Ù…ÙƒØªÙ…Ù„Ø©`);
      }
    }

    // Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ù‡Ø§Ù…
    function shareTasks() {
      const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
      const shareText = tasks.map(task => 
        `${task.completed ? 'âœ…' : 'â­•'} ${task.text}`
      ).join('\n');
      
      if (navigator.share) {
        navigator.share({
          title: 'Ù‚Ø§Ø¦Ù…Ø© Ù…Ù‡Ø§Ù…ÙŠ',
          text: shareText
        });
      } else {
        navigator.clipboard.writeText(shareText);
        showNotification('ğŸ“‹ ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©');
      }
    }

    // Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­
    function setupKeyboardShortcuts() {
      document.addEventListener('keydown', (e) => {
        if (e.ctrlKey && e.key === 'n') {
          e.preventDefault();
          taskInput.focus();
        }
        if (e.key === 'Escape') {
          taskInput.blur();
        }
      });
    }

    function handleEnterKey(event) {
      if (event.key === 'Enter') addTask();
    }

    // Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø©
    function getPriorityIcon(priority) {
      const icons = { high: 'â¬†ï¸ Ø¹Ø§Ù„ÙŠ', medium: 'â¬…ï¸ Ù…ØªÙˆØ³Ø·', low: 'â¬‡ï¸ Ù…Ù†Ø®ÙØ¶' };
      return icons[priority] || 'â¬…ï¸ Ù…ØªÙˆØ³Ø·';
    }

    function extractDateFromMeta(meta) {
      const match = meta.match(/ğŸ“… (.+?) \|/);
      return match && match[1] !== 'Ù„Ø§ ÙŠÙˆØ¬Ø¯' ? match[1] : '';
    }

    function extractRepeatFromMeta(meta) {
      if (meta.includes('ÙŠÙˆÙ…ÙŠ')) return 'daily';
      if (meta.includes('Ø£Ø³Ø¨ÙˆØ¹ÙŠ')) return 'weekly';
      return 'none';
    }
  </script>
</body>
</html>